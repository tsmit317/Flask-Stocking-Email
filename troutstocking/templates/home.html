{% extends 'base.html' %}

{% block head %}
{% endblock head%}

{% block body %}
<script>
  function selectAllCheckbox(select_all_box) {
    let checkboxes = document.getElementsByTagName("input");
    if (select_all_box.checked){
      for(let i = 0; i < checkboxes.length ; i++) {
        checkboxes[i].checked = true;
      }
    }
    else{
      for(let i = 0; i < checkboxes.length ; i++) {
        checkboxes[i].checked = false;
      }
    }
  }
</script>
<div class="flash_container">
  {% with messages = get_flashed_messages(with_categories = true) %}
    {% if messages %}
      {% for category, message in messages %}
      <div class="alert alert-{{category}} alert-dismissible fade show" role="alert">
        <span>{{ message }}</span>
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
      </div>
      {% endfor %}
    {% endif %}
  {% endwith %}
</div>
<div class="container">
  <form method='POST' action='/process-data'> 
    <fieldset>      
        <legend>Select counties</legend> 

        {% for county in counties %}     
            <input type="checkbox" name="counties" value='{{county}}'>{{county}}
            <br>      
        {% endfor %}  
        <input type="checkbox" id="selectall" name="selectall" autocomplete="off"  onclick="selectAllCheckbox(this)">Select All
        <br>
        <label for="email">Enter your email:</label>
        <input type="email" id="email" name="email" required>
        <br>      
        <input type="submit" name ="submit" value="Submit" >
        
    </fieldset> 
     
  </form>
  <a class="unsubscribe" type="button" href="{{ url_for('unsubscribe') }}"><button>Unsubscribe</button></a>    
</div>  
{% endblock body %}